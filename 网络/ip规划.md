# ip地址规划

## ip是什么

ip地址为了网络中设备之间的通信所分配的逻辑地址，32位，常用点分十进制表示。

## 子网掩码

就是将某个IP地址划分成网络地址和主机地址两部分。子网掩码是由一系列的1和0构成，通过将其同IP地址做“与”运算来指出一个IP地址的网络号是什么，还有最大支持的主机个数。

```
192.168.6.1
11000000 10101000 00000110 00000001 主机地址
11111111 11111111 11111111 00000000 子网
11000000 10101000 00000110 00000000 网络号 也就是 192.168.6.0
​
主机号有8位，能分配的最大数量的主机地址个数 2^8-2 减去的是一个网络号，一个广播号
```

## 等长子网划分

### 为什么要进行子网划分？

C类网络地址 192.0.0.0 \~ 223.255.255.255

110开头 + 21网络号 + 8位主机号

可表示的网络段为2^21 2097152 个网络号，主机2^8 - 2为主机数，减去的为网络号和广播地址，每段网络号的地址实际为254，如果没有子网划分的话，假如一个组织分得一个网络地址，但是它实际使用的只有60个ip地址，那么将有194个ip会被浪费掉，所有会出现子网这个概念。有类网络地址，使用自然掩码，不对网段进行细分。

**等长子网划分就是将一个有类网络等分成多个网络，也就是等分成多个子网，所有子网的子网掩码都相同。**

### **子网划分示例**

请将IP网络192.168.1.0/24划分为等长的8个子网，2^3次方为8，所以向主机位借3位即可

```
192.168.1.00000000  对应网络号为  192.168.1.0/27 192.168.1.1 ~ 192.168.1.30  192.168.1.31为广播
192.168.1.00100000  192.168.1.32 
192.168.1.01000000  192.168.1.64
192.168.1.01100000  192.168.1.96
192.168.1.10000000  192.168.1.128
192.168.1.10100000  192.168.1.144
192.168.1.11000000  192.168.1.192
192.168.1.11100000  192.168.1.208
```

子网能使广播信息只在一个区域传播，如果出了子网广播就会阻断

## 可变长子网划分

VLSM可变长子网掩码使网络划分更加灵活。

有一个C类网络200.1.1.0，有4个部门，每个部门72、35、20、18，共145台，请规划ip地址。

```
2^7-2=126>72  10000000  掩码为 255.255.255.128
向主机位借1位作为子网号（网络号）0 000000，这个子网号可以为0也可为1，我们假设为0，那么分配的地址如下
200.1.1.1 ~ 200.1.1.126/25  网络号 200.1.1.0
​
2^6-2=62>35   11000000  掩码为 255.255.255.192 
借2位,10 000000,那么为什么使用10开头呢，因为第一位0已经被使用，所以无法使用01，00
200.1.1.128/26 作为网络号，范围200.1.1.129 ~ 200.1.1.190
​
2^5-2=30>20   11100000  掩码为 255.255.255.224
借3位，110 00000，200.1.1.192 网络号，范围200.1.1.193 ~ 200.1.1.222
​
2^5-2=30>18   11100000  掩码为 255.255.255.224
```
