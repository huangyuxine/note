# 入门

## 目录结构 <a href="#mu-lu-jie-gou" id="mu-lu-jie-gou"></a>

| 目录名称        | 说明                               |
| ----------- | -------------------------------- |
| /boot       | 开机所需文件(内核 开机菜单以及配置文件等)           |
| /dev        | 以文件形式存放任何设备与接口                   |
| /etc        | 配置文件                             |
| /home       | 用户家目录                            |
| /bin        | 存放单用户模式下还可以操作的命令                 |
| /lib        | 开机时用到的函数库，以及/bin与/sbin下面命令要调用的函数 |
| /sbin       | 开机过程中需要的命令                       |
| /media      | 用于挂在设备文件的目录                      |
| /opt        | 放置第三方的软件                         |
| /root       | 系统管理员的家目录                        |
| /srv        | 一些网络服务的数据文件目录                    |
| /tmp        | 任何人可以使用的共享临时目录                   |
| /proc       | 虚拟文件系统，例如系统内核、进程、外部设备及网络状态等      |
| /usr/local  | 用户自行安装的软件                        |
| /usr/sbin   | linux系统开机时不会用到的软件/命令/脚本          |
| /usr/share  | 帮助与说明文件，也可以放置共享文件                |
| /var        | 主要存放经常变化的文件，如日志                  |
| /lost+found | 当文件系统发生错误时，将一些丢失的文件片段放在这里        |
| /mnt        | 挂载目录                             |

## 文件权限

文件所有者/所有组/其他人

读写可执行分别用数字表示，4/2/1

| 标识 | 说明     |
| -- | ------ |
| -  | 普通文件   |
| d  | 目录文件   |
| l  | 链接文件   |
| b  | 块设备文件  |
| c  | 字符设备文件 |
| p  | 管道文件   |

### 默认文件权限

umask命令可以显示和设置这个默认权限。

`umask 026` 改变默认文件权限

## 安装软件

#### 用yum安装软件

可以自动处理依赖性关系。

```
yum install git
```

#### 更新软件

```
yum update git
```

#### 卸载软件

```
yum remove git
```

#### 源码安装

如果你经常在开源软件环境中工作，就很可能会遇到打包成tarball形式的软件。

```
tar -zxvf sysstat-11.1.1.tar.gz
cd sysstat-11.1.1
./configure
make
#用make命令来构建各种二进制文件，make命令会在编译和链接所有的源码文件的过程中产生大量的输出。
make install
```

## VIM编辑器

vim编辑器有两种模式，一种是普通模式，一种是插入模式。

### 普通模式

| 指令       | 说明     |
| -------- | ------ |
| h        | 左移一个字符 |
| j        | 下移一个字符 |
| k        | 上移一个字符 |
| l        | 右移一个字符 |
| G        | 移动到底部  |
| gg       | 移动到顶部  |
| num G    | 移动到指定行 |
| pageUp   | 上翻一页   |
| pageDown | 下翻一页   |

命令行

| 指令 | 说明      |
| -- | ------- |
| q  | 未修改退出   |
| q! | 不保存强制退出 |
| w  | 保存      |
| wq | 保存并退出   |

### 编辑数据

| 指令 | 说明                         |
| -- | -------------------------- |
| x  | 删除当前字符 2x 删除两个字符           |
| dd | 删除当前行 5dd 删除五行 （d开头的复制并删除） |
| dw | 删除当前光标所在位置的单词              |
| d$ | 删除光标所在位置到行尾的内容             |
| dG | 删除光标所在位置到结束的内容             |
| u  | 撤销                         |

### 插入数据

| 指令     | 说明                    |
| ------ | --------------------- |
| i      | 当前位置插入                |
| a      | 当前位置后插入               |
| o      | 另起一行插入                |
| A      | 行尾插入                  |
| r char | 替换光标所在位置字符            |
| R text | 替换当前光标所在位置的数据，直到esc结束 |

### 复制粘贴

| 指令 | 说明   |
| -- | ---- |
| p  | 粘贴   |
| y$ | 复制整行 |

### 查找替换

用`/`的方式搜索关键词，自动跳到出首次出现的位置，定位到下一个则输入`/`继续

`/foo\c` 忽略foo的大小写进行查找

`:%s/small/very/g` 替换全文所有small为very，不忽略大小写

`:%s/small/very/gc` 每次替换的时候提示

## 基本命令

### 目录与文件

`ls -R` 列出当前目录以及子目录下的文件。

`ls -laF` 列出文件列表并展示更多的文件属性，参数a包含隐藏文件，-F区分文件和文件夹

```
drwxr-xr-x 11 root root      4096 Sep 14 17:28 var
文件类型/权限/硬链接总数/所属主/所属组/文件大小（字节）/文件上次修改时间/文件或者目录名称
```

#### 过滤文件

`ls -l b?b.txt` ?表示一个字符

`ls -l b*b.txt` \*表示零个或者多个字符

#### 处理文件

`touch aaa.txt` 创建一个文件

`cp -i aaa.txt bbb.txt` 复制文件 ，-i表示询问是否覆盖

`cp -R aaa ./bbb`复制整个目录

#### 链接文件

引用硬链接文件等同于引用了源文件。要创建硬链接，原始文件也必须事先存在，被链接的文件修改影响源文件，源文件删除不影响被链接的文件。

软连接相当于快捷键，原始文件可以不存在，被链接的文件修改影响源文件，源文件也影响被链接的文件，源文件删除，被链接的文件无法使用。

`ln -s file new_file` 软链接

#### 重命名文件

`mv a.txt b.txt` 移动并重命名文件

`mv aaa bbb` 移动并重命名目录

#### 删除文件

`rm -i file` 提示删除某个文件

`rm -rf file` 强制删除某个文件或者目录

#### 处理目录

`mkdir dir` 创建目录

`mkdir -p dir/dir/dir`批量创建目录和子目录

#### 查看文件类型

```
file aaa.txt
aaa.txt: UTF-8 Unicode text
```

#### 查看文件内容

`cat -n aaa.txt` 查看内容，带行号的，果不想让制表符出现，可以用-T参数

`more /etc/bash.bashrc` 查看大文件，回车一行

`less /etc/bash.bashrc` 可以翻页

`tail -n 10 aaa.txt` 查看文件末尾十行

`head -n 10 aaa.txt`查看文件前十行

### 系统

#### 监测程序

`ps -ef` 查看系统上运行的所有进程

#### 结束进程

`kill 20013` 干掉某个进程

#### 监测磁盘空间

`df`设备上还有多少磁盘空间。

#### 文件搜索

find -name filename表示在当前目录和目录的子目录中，文件名为filename的文件

find filename 当前目录下查找

#### 搜索数据

`grep -n t aaa.txt` 搜索文件aaa.txt包含t的文本，并显示行号

`grep -c t aaa.txt` 包含t的所有行数

#### 压缩解压文件

`zip file.zip file` 压缩文件

`zip -sf test.zip` 查看压缩包的文件

`unzip file.zip` 解压文件

`unzip -n test.zip -d /tmp` 解压到指定目录

`tar czvf filename.tar aaa` 压缩文件

`tar -tf filename.tar` 查看文件

`tar zxvf filename.tar` 解压文件

`tar zxvf filename.tar -C ./test`解压到指定的目录

`crontab -l`查看当前计划任务

`crontab -r`删除某条计划任务

`crontab -e`创建计划任务

## 其他命令

`which 命令`查找命令所在目录

scp传输文件

```
scp -P 275 1.txt root@74.82.*.*:/test
```

`du -sh *`查看文件目录和文件大小

`df -h`目前文件系统的空间使用情况

`df -i` 查看文件索引节点使用情况。文件索引节点数inode占用占满后也会导致服务器的挂掉的。

`netstat -anp |grep 8080` `ps -ef | grep 80`查看某个端口号有没有被占用

`ps x` 显示当前用户运行的所有进程。

#### 重定向输入

`date > test` 输出重定向，将命令的输出发送到一个文件中

`>>`用来追加文件
